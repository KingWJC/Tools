### 数据库对象：

表，约束，视图，索引，序列。

命名规则：

1. 必须以字母开头
2. 可包括数字和三个特殊字符（# _ $）
3. 不要使用oracle的保留字
4. 同一用户下的对象不能同名

### 数据类型

1.  number(x,y) ：数字类型，整数或小数，x是精度（所有数字位的个数，最大38），y是刻
   度范围（小数点右边的数字位个数，最大127）
2. varchar2（maxlength）：变长字符串,这个参数的上限是32767字节，
   声明方式如下VARCHAR2（L），L为字符串长度，没有缺省值，作为变量最大32767个字
   节，存储空间等于实际空间的数据大小，最大为4K。
3. char(max_length) 定长字符串 最大2000字节
4. DATE:日期类型 (只能精确到秒，年、月、日、时、分、秒） 
5. TIMESTAMP:时间戳 (精确到微秒)
6.  long：长字符串，最长2GB
7. CLOB：最大长度4G -->大对象很少使用:如果存在大对象，一般的解决方案存入文件地址
   （地址为程序所在应用服务器的相对路径）。
8. BLOB：存二进制文件。

### 表

两种方式创建表：标准的建表，子查询建表。

表结构修改：alter table ... add/drop/modify ...

再添加表的列的时候，不能定义为“not null”, 基本表在增加一列后，原有元组在新增加的列上的值都定义为空值

正规的表结构设计需要使用第三方工具 powerdesigner

### 约束

约束是在表上强制执行的数据校验规则.

Oracle 支持下面五类完整性约束:
1. NOT NULL非空

2. UNIQUE Key 唯一键

   ▪ 唯一性约束条件确保所在的字段或者字段组合不出现重复值
   ▪ 唯一性约束条件的字段允许出现空值
   ▪ Oracle将为唯一性约束条件创建对应的唯一性索引

3. PRIMARY KEY 主键

   – 主键从功能上看相当于非空且唯一
   – 一个表中只允许一个主键
   – 主键是表中能够唯一确定一个行数据的字段
   – 主键字段可以是单字段或者是多字段的组合
   – Oracle为主键创建对应的唯一性索引

4. FOREIGN KEY 外键

   外键是表中的一个列，其值必须在另一表的主键或者唯一键中列出
   对于主表的删除和修改主键值的操作，会对依赖关系产生影响：采取下列3种做法：

   1. RESTRICT方式：只有当依赖表中没有一个外键值与要删除的主表中主键值相对应时，才可执行删
       除操作。

   2. CASCADE方式：将依赖表中所有外键值与主表中要删除的主键值相对应的记录一起删除

   3. SET NULL方式：将依赖表中所有与主表中被删除的主键值相对应的外键值设为空值

   4. 语法：FOREIGN KEY (DEPTNO) REFERENCES DEPT(DEPTNO)  [ON DELETE [CASCADE|SET NULL]] 

     如省略on短语，缺省为第一中处理方式。

5. CHECK 自定义检查约束

创建：1，在建表的同时创建。2，建表后创建。

撤销：可增加或删除约束，但不能直接修改。

分类：

1. 表级约束：可以约束表中的任意一列或多列。可以定义除了Not Null以外的任何约束。
2. 列级约束：只能约束其所在的某一列。可以定义任何约束

#### 关系模型的三类完整性规则

1. 实体完整性规则
   这条规则要求关系中在组成主键的属性上不能有空值。

2. 参照完整性规则
   这条规则要求“不引用不存在的实体”。例如：外键的取值要么为空，要么等于主表中的某个主键值。
3. 用户定义的完整性规则
   用户定义的完整性规则反应了某一具体的应用涉及的数据必须满足的语义要求。

### 视图

定义：称虚表, 不占用物理空间，这个也是相对概念，因为视图本身的定义语句还是要存储在数据字典里的。视图只有逻辑定义。每次使用的时候, 只是重新执行SQL.

分类：只读视图，普通视图。

作用：sql中有很多的重复的sql子查询，可以通过视图将重复的语句给抽象出来。

### 序列

序列是oracle专有的对象，它用来产生一个自动递增的数列

### 索引

作用：在数据库中用来加速对表的查询,通过使用快速路径访问方法快速定位数据,减少了磁盘的I/O。

创建有两种情况：
1. 自动: 当在表上定义一个PRIMARY KEY 或者UNIQUE 约束条件时,Oracle数据库自动创建一个对应的唯一索引.
2. 手动: 用户可以创建索引以加速查询

使用要点：、

1. 索引改善检索操作的性能，但降低数据插入、修改和删除的性能。在执行这些操作时，DBMS必须动态地更新索引。
2. 索引数据可能要占用大量的存储空间。
3. 并非所有的数据都适合于索引。唯一性不好的数据（如省）从索引的到的好处不比具有更多可能值的数据（如姓名）从索引得到的好处多。
4. 索引用于数据过滤和数据排序。如果你经常以某种特定的顺序排序数据，则该数据可能是索引的备选。
5.  可以在索引中定义多个列（如省加城市），这样的索引只在以省加城市的顺序排序时有用。如果想按城市排序，则这种索引没有用处。

### 数据库设计三范式

数据库的设计主要包含了设计表结构和表之间的联系，以及需要遵守的规则。

1. 第一范式（1NF）

   确保每列保持原子性，列不可分

   数据库表中的所有字段值都是不可分解的原子值，就说明该数据库表满足了第一范式

2. 第二范式（2NF）

   确保表中的每列都和主键相关，必须先满足第一范式（1NF）

   在一个数据库表中，一个表中只能保存一种数据，不可以把多种数据保存在同一张数据库表中

   要求数据库表中的每个实例或行必须可以被唯一地区分。为实现区分通常需要为表加上一个列，以存储各个实例的唯一标识。

   实体的属性完全依赖于主关键字，不能部分依赖。部分依赖，会产生冗余数据，需要分解表

3. 第三范式（3NF）

   要求一个数据库表中不包含已在其它表中已包含的非主关键字信息。必须先满足第二范式（2NF）

   需要确保数据表中的每一列数据都和主键直接相关，而不能间接相关。

   不能存在传递依赖。即：除主键外，其他字段必须依赖主键。

表依赖关系

1. 一对一，一对多， 多对多

解决问题：**数据冗余**。
